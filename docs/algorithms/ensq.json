{
  "guid": "ensq",
  "name": "Envelope Sequencer",
  "categories": [
    "Sequencer",
    "Envelope"
  ],
  "description": "This algorithm is a 16-step envelope or curve sequencer. It can output a CV and/or MIDI. It shares a lot of its design with the Step Sequencer (below), and some of the documentation for this algorithm cross-references with that for the other. Each step has a curve shape, a scale, and an offset. It also has a \"Division\", which can either be a repeat count (the step is repeated a number of times on subsequent clocks) or a ratchet count (the step repeats a number of times within the duration of one clock). The algorithm has a function for randomising the curves in various ways. Each Envelope Sequencer has internal storage for 32 sequences, which you can use like 'snapshots' or 'patterns' to prepare a number of sequences and then switch between them (manually, or under CV control) to build up larger structures. Remember that every curve shape, level, etc. is a parameter and therefore mappable.",
  "specifications": [],
  "parameters": [
    {
      "name": "Sequence",
      "unit": null,
      "defaultValue": 1,
      "minValue": 1,
      "maxValue": 32,
      "scope": "global",
      "description": "Selects the current sequence.",
      "min": 1,
      "max": 32,
      "default": 1
    },
    {
      "name": "Start",
      "unit": null,
      "defaultValue": 1,
      "minValue": 1,
      "maxValue": 16,
      "scope": "global",
      "description": "The first step to play. A reset will jump to this step.",
      "min": 1,
      "max": 16,
      "default": 1
    },
    {
      "name": "End",
      "unit": null,
      "defaultValue": 16,
      "minValue": 1,
      "maxValue": 16,
      "scope": "global",
      "description": "The last step to play.",
      "min": 1,
      "max": 16,
      "default": 16
    },
    {
      "name": "Direction",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 6,
      "scope": "global",
      "description": "The sequencer direction.",
      "min": 0,
      "max": 6,
      "default": 0
    },
    {
      "name": "Permutation",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 3,
      "scope": "global",
      "description": "The sequencer permutation.",
      "min": 0,
      "max": 3,
      "default": 0
    },
    {
      "name": "Reset offset",
      "unit": null,
      "defaultValue": 0,
      "minValue": -16,
      "maxValue": 16,
      "scope": "global",
      "description": "Offsets the step that will jumped to when the sequencer is reset.",
      "min": -16,
      "max": 16,
      "default": 0
    },
    {
      "name": "Length type",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 1,
      "scope": "global",
      "description": "Sets how the length of a step is determined: \"% of clock\" or \"Fixed\"."
    },
    {
      "name": "% length",
      "unit": "%",
      "defaultValue": 100,
      "minValue": 1,
      "maxValue": 100,
      "scope": "global",
      "description": "Sets the length of the step if the type is \"% of clock\"."
    },
    {
      "name": "Fixed length",
      "unit": "ms",
      "defaultValue": 100,
      "minValue": 1,
      "maxValue": 1000,
      "scope": "global",
      "description": "Sets the length of the step if the type is \"Fixed\".",
      "min": 1,
      "max": 1000,
      "default": 100
    },
    {
      "name": "Curve",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 11,
      "scope": "step",
      "description": "Chooses the curve shape for the step.",
      "min": 0,
      "max": 11,
      "default": 0
    },
    {
      "name": "Scale",
      "unit": "V",
      "defaultValue": 0.0,
      "minValue": -10.0,
      "maxValue": 10.0,
      "scope": "step",
      "description": "Sets the amplitude of the curve over the step.",
      "min": -10,
      "max": 10,
      "default": 0
    },
    {
      "name": "Offset",
      "unit": "V",
      "defaultValue": 0.0,
      "minValue": -10.0,
      "maxValue": 10.0,
      "scope": "step",
      "description": "Sets the offset added to the curve during the step.",
      "min": -10,
      "max": 10,
      "default": 0
    },
    {
      "name": "Division",
      "unit": null,
      "defaultValue": 7,
      "minValue": 0,
      "maxValue": 14,
      "scope": "step",
      "description": "Sets the step repeat or ratchet count.",
      "min": 0,
      "max": 14,
      "default": 7
    },
    {
      "name": "Mute",
      "unit": "%",
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 100,
      "scope": "step",
      "description": "Sets the probability that the step will be muted.",
      "min": 0,
      "max": 100,
      "default": 0
    },
    {
      "name": "Skip",
      "unit": "%",
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 100,
      "scope": "step",
      "description": "Sets the probability that the step will be skipped.",
      "min": 0,
      "max": 100,
      "default": 0
    },
    {
      "name": "Reset",
      "unit": "%",
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 100,
      "scope": "step",
      "description": "Sets the probability that the step causes a reset.",
      "min": 0,
      "max": 100,
      "default": 0
    },
    {
      "name": "Repeat",
      "unit": "%",
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 100,
      "scope": "step",
      "description": "Sets the probability that the step will be repeated.",
      "min": 0,
      "max": 100,
      "default": 0
    },
    {
      "name": "Randomise",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 1,
      "scope": "randomise",
      "description": "When this parameter changes from 0 to 1, the sequence steps between the current start and end steps will be randomised according to the parameters that follow.",
      "min": 0,
      "max": 1,
      "default": 0
    },
    {
      "name": "Levels",
      "unit": null,
      "defaultValue": 1,
      "minValue": 0,
      "maxValue": 1,
      "scope": "randomise",
      "description": "If set, the curve levels (scales) will be randomised."
    },
    {
      "name": "Curves",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 1,
      "scope": "randomise",
      "description": "If set, the curve shapes will be randomised.",
      "min": 0,
      "max": 1,
      "default": 0
    },
    {
      "name": "Repeats",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 1,
      "scope": "randomise",
      "description": "If set, the repeats/ratchets will be randomised.",
      "min": 0,
      "max": 1,
      "default": 0
    },
    {
      "name": "Min repeat",
      "unit": null,
      "defaultValue": 2,
      "minValue": 2,
      "maxValue": 8,
      "scope": "randomise",
      "description": "The minimum repeat count, if a step is a repeat.",
      "min": 2,
      "max": 8,
      "default": 2
    },
    {
      "name": "Max repeat",
      "unit": null,
      "defaultValue": 8,
      "minValue": 2,
      "maxValue": 8,
      "scope": "randomise",
      "description": "The maximum repeat count, if a step is a repeat.",
      "min": 2,
      "max": 8,
      "default": 8
    },
    {
      "name": "Min ratchet",
      "unit": null,
      "defaultValue": 2,
      "minValue": 2,
      "maxValue": 8,
      "scope": "randomise",
      "description": "The minimum ratchet count, if a step is a ratchet.",
      "min": 2,
      "max": 8,
      "default": 2
    },
    {
      "name": "Max ratchet",
      "unit": null,
      "defaultValue": 8,
      "minValue": 2,
      "maxValue": 8,
      "scope": "randomise",
      "description": "The maximum ratchet count, if a step is a ratchet.",
      "min": 2,
      "max": 8,
      "default": 8
    },
    {
      "name": "Repeat probability",
      "unit": "%",
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 100,
      "scope": "randomise",
      "description": "The probability that a step will be a repeat.",
      "min": 0,
      "max": 100,
      "default": 0
    },
    {
      "name": "Ratchet probability",
      "unit": "%",
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 100,
      "scope": "randomise",
      "description": "The probability that a step will be a ratchet."
    },
    {
      "name": "Clock input",
      "unit": "bus",
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 28,
      "scope": "routing",
      "description": "The bus to use as the clock input.",
      "min": 0,
      "max": 28,
      "default": 0
    },
    {
      "name": "Reset input",
      "unit": "bus",
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 28,
      "scope": "routing",
      "description": "The bus to use as the reset input.",
      "min": 0,
      "max": 28,
      "default": 0
    },
    {
      "name": "Reset mode",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 2,
      "scope": "routing",
      "description": "Sets the mode for the reset input. The options are: the input is a reset trigger, the input is a run/stop signal, the input is a 'one shot' trigger.",
      "min": 0,
      "max": 2,
      "default": 0
    },
    {
      "name": "Output",
      "unit": "bus",
      "defaultValue": 15,
      "minValue": 0,
      "maxValue": 28,
      "scope": "routing",
      "description": "The bus to use for the CV output.",
      "min": 0,
      "max": 28,
      "default": 15
    },
    {
      "name": "Output mode",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 1,
      "scope": "routing",
      "description": "The standard Add/Replace mode selector as described above."
    },
    {
      "name": "Sequence CV input",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 28,
      "scope": "routing",
      "description": "The bus to use to select the sequence."
    },
    {
      "name": "Sequence trigger input",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 28,
      "scope": "routing",
      "description": "The bus to use for the sequence select trigger.",
      "min": 0,
      "max": 28,
      "default": 0
    },
    {
      "name": "Sequence change mode",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 1,
      "scope": "routing",
      "description": "How the sequence CV will be used to change sequences: 'Switch' or 'Load'."
    },
    {
      "name": "Follow MIDI clock",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 1,
      "scope": "MIDI",
      "description": "Sets whether the sequencer follows MIDI clock."
    },
    {
      "name": "Divisor",
      "unit": null,
      "defaultValue": 4,
      "minValue": 0,
      "maxValue": 19,
      "scope": "MIDI",
      "description": "Sets the clock divisor when following MIDI clock."
    },
    {
      "name": "MIDI channel",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 16,
      "scope": "MIDI",
      "description": "Sets the output MIDI channel.",
      "min": 0,
      "max": 16,
      "default": 0
    },
    {
      "name": "MIDI CC",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 127,
      "scope": "MIDI",
      "description": "Sets the MIDI CC number to send.",
      "min": 0,
      "max": 127,
      "default": 0
    },
    {
      "name": "Output to breakout",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 1,
      "scope": "MIDI",
      "description": "Enables MIDI output to the breakout.",
      "min": 0,
      "max": 1,
      "default": 0
    },
    {
      "name": "Output to Select Bus",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 1,
      "scope": "MIDI",
      "description": "Enables MIDI output to the Select Bus."
    },
    {
      "name": "Output to USB",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 1,
      "scope": "MIDI",
      "description": "Enables MIDI output to USB.",
      "min": 0,
      "max": 1,
      "default": 0
    },
    {
      "name": "Output to internal",
      "unit": null,
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 1,
      "scope": "MIDI",
      "description": "Enables internal MIDI output - that is, MIDI is sent to the other algorithms.",
      "min": 0,
      "max": 1,
      "default": 0
    },
    {
      "name": "sequencer is reset. Length type",
      "min": 0,
      "max": 1,
      "default": 0,
      "description": "Sets how the length of a step is determined: \"% of"
    },
    {
      "name": "clock\" or \"Fixed\". % length",
      "unit": "%",
      "min": 1,
      "max": 100,
      "default": 100,
      "description": "Sets the length of the step if the type is \"% of clock\"."
    },
    {
      "name": "sequence steps between the current start and end steps will be randomised according to the parameters that follow. Levels",
      "min": 0,
      "max": 1,
      "default": 1,
      "description": "If set, the curve levels (scales) will be randomised."
    },
    {
      "name": " the input is a reset trigger.  the input is a run/stop signal.  the input is a 'one shot' trigger. Output",
      "min": 0,
      "max": 28,
      "default": 15,
      "description": "The bus to use for the CV output.",
      "scope": "routing"
    },
    {
      "name": "0 1 0 Sets whether the sequencer follows MIDI clock. Divisor",
      "min": 0,
      "max": 19,
      "default": 4,
      "description": "Sets the clock divisor when following MIDI clock."
    },
    {
      "name": "sequence steps between the current start and end steps will be randomised according to the parameters that follow. Levels",
      "min": 0,
      "max": 1,
      "default": 1,
      "description": "If set, the curve levels (scales) will be randomised."
    },
    {
      "name": " the input is a reset trigger.  the input is a run/stop signal.  the input is a 'one shot' trigger. Output",
      "min": 0,
      "max": 28,
      "default": 15,
      "description": "The bus to use for the CV output.",
      "scope": "routing"
    },
    {
      "name": "0 1 0 The standard Add/Replace mode selector as described above. Sequence CV input",
      "min": 0,
      "max": 28,
      "default": 0,
      "description": "The bus to use to select the sequence. See below.",
      "scope": "routing"
    },
    {
      "name": "0 1 0 Sets whether the sequencer follows MIDI clock. Divisor",
      "min": 0,
      "max": 19,
      "default": 4,
      "description": "Sets the clock divisor when following MIDI clock."
    },
    {
      "name": "0 16 0 Sets the output MIDI channel. MIDI CC",
      "min": 0,
      "max": 127,
      "default": 0,
      "description": "Sets the MIDI CC number to send.",
      "scope": "routing"
    }
  ],
  "input_ports": [
    {
      "name": "Clock input",
      "busIdRef": "Clock input"
    },
    {
      "name": "Reset input",
      "busIdRef": "Reset input"
    }
  ],
  "output_ports": [
    {
      "name": "Output",
      "busIdRef": "Output"
    }
  ]
}